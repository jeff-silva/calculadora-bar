import{L as re,K as se,o as ie,M as Z,r as ee,N as de,H as te,O as ce,P as fe,Q as pe,R as me,c as _e,t as h,S as j,A as u,z as a,V as ve,x as S,T as W,U as $,B as v,W as k,X as H,v as T,Y as q,Z as M,$ as Q,a0 as G,y as O,a1 as I,a2 as K,a3 as x,a4 as E,a5 as ye,a6 as N,a7 as U,a8 as P,a9 as Ve,aa as he,ab as be,_ as ge}from"./entry.74c7cf5b.js";function we(e){return ce()?(fe(e),!0):!1}function J(e){return typeof e=="function"?e():re(e)}const Se=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const xe=Object.prototype.toString,Ce=e=>xe.call(e)==="[object Object]",Oe=()=>{};function Ae(e,n){function t(...d){return new Promise((c,o)=>{Promise.resolve(e(()=>n.apply(this,d),{fn:n,thisArg:this,args:d})).then(c).catch(o)})}return t}const le=e=>e();function Fe(e=le){const n=ee(!0);function t(){n.value=!1}function d(){n.value=!0}const c=(...o)=>{n.value&&e(...o)};return{isActive:de(n),pause:t,resume:d,eventFilter:c}}function Te(e,n,t={}){const{eventFilter:d=le,...c}=t;return te(e,Ae(d,n),c)}function Ee(e,n,t={}){const{eventFilter:d,...c}=t,{eventFilter:o,pause:i,resume:l,isActive:r}=Fe(d);return{stop:Te(e,n,{...c,eventFilter:o}),pause:i,resume:l,isActive:r}}function Ne(e,n=!0){se()?ie(e):n?e():Z(e)}function Ue(e){var n;const t=J(e);return(n=t==null?void 0:t.$el)!=null?n:t}const z=Se?window:void 0;function X(...e){let n,t,d,c;if(typeof e[0]=="string"||Array.isArray(e[0])?([t,d,c]=e,n=z):[n,t,d,c]=e,!n)return Oe;Array.isArray(t)||(t=[t]),Array.isArray(d)||(d=[d]);const o=[],i=()=>{o.forEach(p=>p()),o.length=0},l=(p,f,y,V)=>(p.addEventListener(f,y,V),()=>p.removeEventListener(f,y,V)),r=te(()=>[Ue(n),J(c)],([p,f])=>{if(i(),!p)return;const y=Ce(f)?{...f}:f;o.push(...t.flatMap(V=>d.map(A=>l(p,V,A,y))))},{immediate:!0,flush:"post"}),_=()=>{r(),i()};return we(_),_}const B=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},D="__vueuse_ssr_handlers__",Pe=Be();function Be(){return D in B||(B[D]=B[D]||{}),B[D]}function De(e,n){return Pe[e]||n}function je(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const We={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},Y="vueuse-storage";function $e(e,n,t,d={}){var c;const{flush:o="pre",deep:i=!0,listenToStorageChanges:l=!0,writeDefaults:r=!0,mergeDefaults:_=!1,shallow:p,window:f=z,eventFilter:y,onError:V=s=>{console.error(s)},initOnMounted:A}=d,b=(p?pe:ee)(typeof n=="function"?n():n);if(!t)try{t=De("getDefaultStorage",()=>{var s;return(s=z)==null?void 0:s.localStorage})()}catch(s){V(s)}if(!t)return b;const g=J(n),R=je(g),C=(c=d.serializer)!=null?c:We[R],{pause:ae,resume:L}=Ee(b,()=>ne(b.value),{flush:o,deep:i,eventFilter:y});return f&&l&&Ne(()=>{X(f,"storage",F),X(f,Y,oe),A&&F()}),A||F(),b;function ne(s){try{if(s==null)t.removeItem(e);else{const m=C.write(s),w=t.getItem(e);w!==m&&(t.setItem(e,m),f&&f.dispatchEvent(new CustomEvent(Y,{detail:{key:e,oldValue:w,newValue:m,storageArea:t}})))}}catch(m){V(m)}}function ue(s){const m=s?s.newValue:t.getItem(e);if(m==null)return r&&g!==null&&t.setItem(e,C.write(g)),g;if(!s&&_){const w=C.read(m);return typeof _=="function"?_(w,g):R==="object"&&!Array.isArray(w)?{...g,...w}:w}else return typeof m!="string"?m:C.read(m)}function oe(s){F(s.detail)}function F(s){if(!(s&&s.storageArea!==t)){if(s&&s.key==null){b.value=g;return}if(!(s&&s.key!==e)){ae();try{(s==null?void 0:s.newValue)!==C.write(b.value)&&(b.value=ue(s))}catch(m){V(m)}finally{s?Z(L):L()}}}}}const ke={class:"d-flex flex-column",style:{gap:"25px"}},qe=S("br",null,null,-1),Me=S("br",null,null,-1),ze={__name:"calculadora-bar",setup(e){const n=$e("calc",{people:[],products:[]}),t=me({uid(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,o=>(o^crypto.getRandomValues(new Uint8Array(1))[0]&15>>o/4).toString(16))},people:{focus:!1,items:n.value.people,default(o={}){return{uid:t.uid(),name:"",observation:"",...o}},add(){this.focus=this.default(),this.items.push(this.focus),n.value.people=this.items},remove(o){const i=this.items.indexOf(o);this.items.splice(i,1),n.value.people=this.items,t.products.items.map(l=>{const r=l.divideBy.indexOf(o.uid);l.divideBy.splice(r,1)})}},products:{focus:!1,items:n.value.products,default(o={}){return{uid:t.uid(),name:"",amount:0,quantity:1,divideBy:[],...o}},add(){this.focus=this.default(),this.items.push(this.focus),n.value.products=this.items},remove(o){const i=this.items.indexOf(o);this.items.splice(i,1),n.value.products=this.items}},result:_e(()=>{let o={total:0,people:[]};return o.total=t.products.items.reduce((i,l)=>{const r=parseFloat((l.amount||"0").replace(/[^0-9]/g,""))/100,_=parseFloat(l.quantity);return r*_},0),t.people.items.map(i=>{let l=t.products.items.filter(_=>_.divideBy.includes(i.uid));const r=l.reduce((_,p)=>{const f=parseFloat((p.amount||"0").replace(/[^0-9]/g,""))/100,y=parseFloat(p.quantity);return f*y/p.divideBy.length},0);o.people.push({total:r,person:i,products:l})}),o})}),d={variant:"outlined",hideDetails:!0},c={VTextField:d,VSelect:d,VTextarea:d,VCard:{class:"bg-grey-lighten-3",elevation:0},VExpansionPanelText:{class:"pt-3"}};return(o,i)=>(h(),j(be,{style:{"max-width":"800px"}},{default:u(()=>[a(ve,{defaults:c},{default:u(()=>[S("div",ke,[a(W,null,{default:u(()=>[a($,null,{default:u(()=>[v("Pessoas")]),_:1}),a(k,null,{default:u(()=>[a(H,{variant:"accordion",modelValue:t.people.focus,"onUpdate:modelValue":i[0]||(i[0]=l=>t.people.focus=l)},{default:u(()=>[(h(!0),T(q,null,M(t.people.items,l=>(h(),j(Q,{value:l},{default:u(()=>[a(G,null,{default:u(()=>[v(O(l.name||"Sem nome"),1)]),_:2},1024),a(I,null,{default:u(()=>[a(K,null,{default:u(()=>[a(x,{cols:"12"},{default:u(()=>[a(E,{label:"Nome",modelValue:l.name,"onUpdate:modelValue":r=>l.name=r},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(x,{cols:"12"},{default:u(()=>[a(ye,{label:"Observação",modelValue:l.observation,"onUpdate:modelValue":r=>l.observation=r,"auto-grow":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),qe,a(N,null,{default:u(()=>[a(U),a(P,{class:"bg-error","prepend-icon":"mdi-delete",onClick:r=>t.people.remove(l)},{default:u(()=>[v("Delete")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"])]),_:1}),a(N,null,{default:u(()=>[a(U),a(P,{onClick:i[1]||(i[1]=l=>t.people.add())},{default:u(()=>[v("Criar")]),_:1})]),_:1})]),_:1}),a(W,null,{default:u(()=>[a($,null,{default:u(()=>[v("Consumo")]),_:1}),a(k,null,{default:u(()=>[a(H,{variant:"accordion",modelValue:t.products.focus,"onUpdate:modelValue":i[2]||(i[2]=l=>t.products.focus=l)},{default:u(()=>[(h(!0),T(q,null,M(t.products.items,l=>(h(),j(Q,{value:l},{default:u(()=>[a(G,null,{default:u(()=>[v(O(l.name||"Sem nome"),1)]),_:2},1024),a(I,null,{default:u(()=>[a(K,null,{default:u(()=>[a(x,{cols:"12"},{default:u(()=>[a(E,{label:"Produto",modelValue:l.name,"onUpdate:modelValue":r=>l.name=r},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(x,{cols:"8"},{default:u(()=>[a(E,{label:"Preço",modelValue:l.amount,"onUpdate:modelValue":r=>l.amount=r},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(x,{cols:"4"},{default:u(()=>[a(E,{label:"Quantidade",modelValue:l.quantity,"onUpdate:modelValue":r=>l.quantity=r,type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(x,{cols:"12"},{default:u(()=>[a(Ve,{label:"Quem vai consumir?",modelValue:l.divideBy,"onUpdate:modelValue":r=>l.divideBy=r,items:t.people.items,"item-value":"uid","item-title":"name",multiple:""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)]),_:2},1024),Me,a(N,null,{default:u(()=>[a(U),a(P,{class:"bg-error","prepend-icon":"mdi-delete",onClick:r=>t.products.remove(l)},{default:u(()=>[v("Delete")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"])]),_:1}),a(N,null,{default:u(()=>[a(U),a(P,{onClick:i[3]||(i[3]=l=>t.products.add())},{default:u(()=>[v("Criar")]),_:1})]),_:1})]),_:1}),a(W,null,{default:u(()=>[a($,null,{default:u(()=>[v("Rateio")]),_:1}),a(k,null,{default:u(()=>[a(he,null,{default:u(()=>[S("tbody",null,[(h(!0),T(q,null,M(t.result.people,l=>(h(),T("tr",null,[S("td",null,O(l.person.name),1),S("td",null,O(l.products.map(r=>`${r.quantity} ${r.name}`).join(", ")),1),S("td",null,O(l.total),1)]))),256))])]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1}))}},Je={};function Re(e,n){const t=ze;return h(),j(t)}const He=ge(Je,[["render",Re]]);export{He as default};
