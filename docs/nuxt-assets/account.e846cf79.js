import{n as g,o as u,c,q as V,s as v,a as d,u as y,w as _,b as i,v as l,V as f,x as b,y as w,z as x}from"./entry.dff263d3.js";import{_ as h}from"./nuxt-layout.01d41d21.js";import{u as U}from"./useFirebaseStore.cd7371c7.js";import{u as C}from"./useForm.02efe856.js";const F=["src"],S=d("div",null,null,-1),$={__name:"image-field",props:{modelValue:{type:[String],default:""},size:{type:[Number,String],default:"100px"}},emits:["update:modelValue","fileChange"],setup(m,{emit:s}){const t=m,r=s,n=g({preview:t.modelValue,browser(){Object.assign(document.createElement("input"),{type:"file",onchange:e=>{if(typeof e.target.files[0]>"u")return;const o=e.target.files[0];this.preview=URL.createObjectURL(o),r("fileChange",o)}}).click()}});return(e,o)=>(u(),c("div",{class:"v-image-field rounded elevation-2 bg-grey-lighten-3",style:v(`width: ${t.size}; height: ${t.size};`),onClick:o[0]||(o[0]=p=>n.browser())},[n.preview?(u(),c("img",{key:0,src:n.preview,alt:""},null,8,F)):V("",!0),S],4))}},k=d("br",null,null,-1),z={class:"d-flex align-center justify-end"},j={__name:"account",setup(m){const s=U(),t=C({data:{...s.user},async onSubmit(){await s.auth.update(t.data),location.reload()}}),r=async n=>{const e=await s.storage.upload(n);t.data.photoURL=e.url};return(n,e)=>{const o=$,p=h;return u(),y(p,{name:"app"},{main:_(()=>[i(x,{onSubmit:e[4]||(e[4]=w(a=>l(t).submit(),["prevent"]))},{default:_(()=>[i(o,{modelValue:l(t).data.photoURL,"onUpdate:modelValue":e[0]||(e[0]=a=>l(t).data.photoURL=a),onFileChange:e[1]||(e[1]=a=>r(a))},null,8,["modelValue"]),k,i(f,{modelValue:l(t).data.name,"onUpdate:modelValue":e[2]||(e[2]=a=>l(t).data.name=a),label:"Nome"},null,8,["modelValue"]),i(f,{modelValue:l(t).data.email,"onUpdate:modelValue":e[3]||(e[3]=a=>l(t).data.email=a),label:"E-mail"},null,8,["modelValue"]),d("div",z,[i(b,{type:"submit",text:"Salvar",color:"primary"})])]),_:1})]),_:1})}}};export{j as default};
