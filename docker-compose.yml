version: "3"
services:
  # nuxt3:
  #   image: node:18.16.0
  #   working_dir: /nuxt3
  #   # command: bash -c "yarn install && yarn dev"
  #   command: bash -c "yarn install && nr dev:preview:build"
  #   # command: bash -c "yarn install && nr dev:preview:generate"
  #   env_file: .env
  #   ports:
  #     - ${NUXT_PORT:-3000}:3000
  #     - ${VITE_PORT:-24678}:${VITE_PORT:-24678}
  #   volumes:
  #     - ./nuxt3:/nuxt3
  #   environment:
  #     - NODE_ENV=development
  #     - CHOKIDAR_USEPOLLING=true
  #     - HOST=${NUXT_HOST:-0.0.0.0}
  #     - PORT=${NUXT_PORT:-3000}

  # https://github.com/Deadolus/android-studio-docker
  android_studio:
    image: deadolus/android-studio
    build: ./docker/android_studio
    volumes:
      - ./studio-data/profile/AndroidStudio2022.3.1.20:/studio-data/profile/AndroidStudio2022.3.1.20
      - ./studio-data/Android:/studio-data/Android
      - ./studio-data/profile/.android:/studio-data/profile/.android
      - ./studio-data/profile/.java:/studio-data/profile/.java
      - ./studio-data/profile/.gradle:/studio-data/profile/.gradle
        # Mount the proper location for X11 server if you are running this in WSL
      - /mnt/wslg/.X11-unix:/tmp/.X11-unix
        # Mount the proper locationm for x11 server if you are running this in native linux
      #      - /tmp/.X11-unix:/tmp/.X11-unix .
      - android_studio:/androidstudio-data
    environment:
      - DISPLAY=:0 # Set DISPLAY environment variable
    privileged: true
    group_add:
      - plugdev
    network_mode: "host"
    #    devices:
    # Uncomment the previous and next line if you want to pass through USB to the container.
    # - /dev/bus/usb:/dev/bus/usb
    entrypoint: /usr/local/bin/docker_entrypoint.sh

volumes:
  android_studio:
